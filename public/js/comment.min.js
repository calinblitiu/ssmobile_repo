function setCharAt(t,e,n){return e>t.length-1?n:t.substr(0,e)+n+t.substr(e+1)}function isStringReg(t){var e,n=t.charAt(0);return e=0===n.indexOf(n.toUpperCase())?n.toLowerCase():n.toUpperCase(),setCharAt(t,0,e)}function operator(){var t=Date.now();$("span.comment-post-time").each(function(){var e=$(this).attr("data-created"),n=parseInt(t/1e3-e),a=parseInt(n/60/60/24),o=parseInt(n/60/60)-24*a,i=parseInt(n/60)-60*o-1440*a,r="";0!=i&&(0!=a&&(r+=a+" days "),0!=o&&(r+=o+" hours "),r+=i+" minutes ago"),0==i&&(r+="Just now"),$(this).text(r)})}function editComment(t,e,n){var a=$(n).parent().parent().parent().parent().find("div#commentContent_"+e).html(),o=$(n).parent().parent().parent().parent().find("textarea#texteditor_"+e);$(o).val(a)}function validateEdit(t){if(alert("hi"),""==$.trim(t))return"This field is required"}function deleteComment(t){axios.post("/deleteComment",{commentId:t}).then(function(e){e.data.deleted&&$("#comment_"+t).remove()}).catch(function(t){console.log(t)})}$('[data-toggle="collapse"]').on("click",function(){var t=$(this),e=t.data("parent");if(void 0===t.data("parent"))return t.find(".glyphicon").toggleClass("glyphicon-plus glyphicon-minus"),!0;var n=t.find(".glyphicon");n.toggleClass("glyphicon-plus glyphicon-minus"),e.find(".glyphicon").not(n).removeClass("glyphicon-minus").addClass("glyphicon-plus")}),$(function(t){setInterval(function(){operator()},6e4),t.fn.editable.defaults.params=function(e){return e._token=t("#_token").data("token"),e},t.fn.editable.defaults.mode="inline",t(".editable").editable(),t("body").delegate("#postComment","submit",function(e){if(e.preventDefault(),""!=t("<div>"+t(this).find("textarea[name=comment]").val()+"</div>").text()){var n=t(this),a=t(this).attr("action"),o=t(this).serialize();axios.post(a,o).then(function(e){e.data=e.data.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"');var a=t.parseHTML(e.data);t("#postComment").hide(),t("#comments-div").prepend(a),t(".no-comments").length&&t(".no-comments").remove();var o=t(a).find(" [data-comment-count]").data("commentCount");t(".comment-count span").text(o),n[0].reset(),t("textarea").sceditor({toolbar:"bold,italic,underline,color,emoticon",style:"/css/jquery.sceditor.default.css",height:150,width:"95%"})}).catch(function(t){console.log(t)})}}),t("body").delegate(".comment-reply-form","submit",function(e){if(e.preventDefault(),""!=t(this).find("textarea[name=comment]").val()){var n=t(this),a=t(this).attr("action"),o=n.context[2].value,i=t(this).serialize();axios.post(a,i).then(function(e){e.data=e.data.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"');var a=t.parseHTML(e.data);t("#replies_"+o).length?t("#replies_"+o).prepend(a):t("#comment_"+o).append(t.parseHTML('<div class="replies" id="replies_'+o+'" data-comment-id = "'+o+'">'+e.data+"</div>")),n[0].reset(),n.parent().parent().find(".reply_button").click();var i=t(a).find("[data-comment-count]").data("commentCount");t(".comment-count span").text(i),t("textarea").sceditor({toolbar:"bold,italic,underline,color,emoticon",style:"/css/jquery.sceditor.default.css",height:150,width:"95%"})}).catch(function(t){console.log(t)})}}),t("body").delegate(".comment-quota-form","submit",function(e){if(e.preventDefault(),""!=t(this).find("textarea[name=comment]").value){var n=t(this),a=t(this).attr("action"),o=n.context[2].value,i=t(this).serialize();axios.post(a,i).then(function(e){e.data=e.data.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"');var a=t.parseHTML(e.data);t("#replies_"+o).length?t("#replies_"+o).prepend(a):t("#comment_"+o).append(t.parseHTML('<div class="replies" id="replies_'+o+'" data-comment-id = "'+o+'">'+e.data+"</div>")),n[0].reset(),n.parent().parent().find(".quota_button").click();var i=t(a).find("[data-comment-count]").data("commentCount");t(".comment-count span").text(i),t("textarea").sceditor({toolbar:"bold,italic,underline,color,emoticon",style:"/css/jquery.sceditor.default.css",height:150,width:"95%"})}).catch(function(t){console.log(t)})}}),t("body").delegate(".comment-edit-form","submit",function(e){if(e.preventDefault(),""!=t(this).find("textarea[name=comment]").val()){var n=t(this),a=t(this).attr("action"),o=(n.context[2].value,t(this).serialize());axios.post(a,o).then(function(t){console.log(t.data),"OK"==t.statusText&&(n.parent().parent().find(".edit_button").click(),n.parent().parent().find("div.comment_content").html(t.data))}).catch(function(t){console.log(t)})}})});