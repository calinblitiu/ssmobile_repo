!function(e){var t={saveSelection:function(){e(this).data("editor").focus(),window.getSelection?(sel=window.getSelection(),sel.getRangeAt&&sel.rangeCount&&e(this).data("currentRange",sel.getRangeAt(0))):document.selection&&document.selection.createRange?e(this).data("currentRange",document.selection.createRange()):e(this).data("currentRange",null)},restoreSelection:function(t,a){var n=e(this).data("currentRange");if(n)if(window.getSelection){if(t)if(n.deleteContents(),"html"==a){var i=document.createElement("div");i.innerHTML=t;for(var l,o=document.createDocumentFragment();l=i.firstChild;)o.appendChild(l);n.insertNode(o)}else n.insertNode(document.createTextNode(t));sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(n)}else document.selection&&n.select&&(n.select(),t&&("html"==a?n.pasteHTML(t):n.text=t))},restoreIESelection:function(){var t=e(this).data("currentRange");t&&(window.getSelection?(sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(t)):document.selection&&t.select&&t.select())},insertTextAtSelection:function(e,t){var a,n;if(window.getSelection){if((a=window.getSelection()).getRangeAt&&a.rangeCount){(n=a.getRangeAt(0)).deleteContents();var i=document.createTextNode(e);if("html"==t){var l=document.createElement("div");l.innerHTML=e;for(var o,r=document.createDocumentFragment();o=l.firstChild;)r.appendChild(o);n.insertNode(r)}else n.insertNode(i),n.selectNode(i);a.removeAllRanges(),(n=n.cloneRange()).collapse(!1),a.addRange(n)}}else document.selection&&document.selection.createRange&&((n=document.selection.createRange()).pasteHTML(e),n.select())},imageWidget:function(){var a=e("<div/>",{class:"row"}).append(e("<div/>",{id:"imgErrMsg"})),n=e("<div/>",{class:"tabbable tabs-left"}),i=e("<ul/>",{class:"nav nav-tabs"}).append(e("<li/>",{class:"active"}).append(e("<a/>",{href:"#uploadImageBar","data-toggle":"tab"}).html("From Computer"))).append(e("<li/>").append(e("<a/>",{href:"#imageFromLinkBar","data-toggle":"tab"}).html("From URL"))),l=e("<div/>",{class:"tab-content"}),o=e("<div/>",{id:"uploadImageBar",class:"tab-pane active"});handleFileSelect=function(a){for(var n,i=a.target.files,l=0;n=i[l];l++)if(n.type.match("image.*")&&n.name.match(/(?:gif|jpg|png|jpeg)$/)){var o=new FileReader;o.onload=function(t){return function(a){var n=e("<li/>",{class:"col-xs-12 col-sm-6 col-md-3 col-lg-3"}),i=e("<a/>",{href:"javascript:void(0)",class:"thumbnail"});e("<img/>",{src:a.target.result,title:escape(t.name)}).appendTo(i).click(function(){e("#imageList").data("current",e(this).attr("src"))});n.append(i).appendTo(e("#imageList"))}}(n),o.readAsDataURL(n)}else t.showMessage.apply(this,["imgErrMsg","Invalid file type"])};var r=e("<input/>",{type:"file",class:"inline-form-control",multiple:"multiple"});r.on("change",handleFileSelect),o.append(r);var s=e("<div/>",{id:"imageFromLinkBar",class:"tab-pane"}),d=e("<div/>",{class:"input-group"});e("<input/>",{type:"url",class:"form-control",id:"imageURL",placeholder:"Enter URL"}).appendTo(d),e("<button/>",{class:"btn btn-success",type:"button"}).html("Go!").click(function(){var a=e("#imageURL").val();if(""==a)return t.showMessage.apply(this,["imgErrMsg","Please enter image url"]),!1;var n=e("<li/>",{class:"span6 col-xs-12 col-sm-6 col-md-3 col-lg-3"}),i=e("<a/>",{href:"javascript:void(0)",class:"thumbnail"});e("<img/>",{src:a}).error(function(){return t.showMessage.apply(this,["imgErrMsg","Invalid image url"]),!1}).load(function(){e(this).appendTo(i).click(function(){e("#imageList").data("current",e(this).attr("src"))}),n.append(i).appendTo(e("#imageList"))})}).appendTo(e("<span/>",{class:"input-group-btn form-control-button-right"}).appendTo(d));s.append(d),l.append(o).append(s),n.append(i).append(l);var c=e("<div/>",{class:"col-xs-12 col-sm-12 col-md-12 col-lg-12"});e("<ul/>",{class:"thumbnails padding-top list-unstyled",id:"imageList"}).appendTo(c);return a.append(n).append(c),a},tableWidget:function(t){var a="";return void 0!==t&&(a="Edt"),e("<div/>",{class:"row-fluid"}).append(e("<div/>",{id:"tblErrMsg"+a})).append(e("<form/>",{id:"tblForm"+a}).append(e("<div/>",{class:"row"}).append(e("<div/>",{id:"tblInputsLeft"+a,class:"col-xs-12 col-sm-6 col-md-6 col-lg-6"}).append(e("<label/>",{for:"tblRows"+a,text:"Rows"})).append(e("<input/>",{id:"tblRows"+a,type:"text",class:"form-control form-control-width",value:2})).append(e("<label/>",{for:"tblColumns"+a,text:"Columns"})).append(e("<input/>",{id:"tblColumns"+a,type:"text",class:"form-control form-control-width",value:2})).append(e("<label/>",{for:"tblWidth"+a,text:"Width"})).append(e("<input/>",{id:"tblWidth"+a,type:"text",class:"form-control form-control-width",value:400})).append(e("<label/>",{for:"tblHeight"+a,text:"Height"})).append(e("<input/>",{id:"tblHeight"+a,type:"text",class:"form-control form-control-width"}))).append(e("<div/>",{id:"tblInputsRight"+a,class:"col-xs-12 col-sm-6 col-md-6 col-lg-6"}).append(e("<label/>",{for:"tblAlign"+a,text:"Alignment"})).append(e("<select/>",{id:"tblAlign"+a,class:"form-control form-control-width"}).append(e("<option/>",{text:"Choose",value:""})).append(e("<option/>",{text:"Left",value:"left"})).append(e("<option/>",{text:"Center",value:"center"})).append(e("<option/>",{text:"Right",value:"right"}))).append(e("<label/>",{for:"tblBorder"+a,text:"Border size"})).append(e("<input/>",{id:"tblBorder"+a,type:"text",class:"form-control form-control-width",value:1})).append(e("<label/>",{for:"tblCellspacing"+a,text:"Cell spacing"})).append(e("<input/>",{id:"tblCellspacing"+a,type:"text",class:"form-control form-control-width",value:1})).append(e("<label/>",{for:"tblCellpadding"+a,text:"Cell padding"})).append(e("<input/>",{id:"tblCellpadding"+a,type:"text",class:"form-control form-control-width",value:1})))))},imageAttributeWidget:function(){return e("<div/>",{class:"row-fluid"}).append(e("<div/>",{id:"imageErrMsg"})).append(e("<input/>",{id:"imgAlt",type:"text",class:"form-control form-control-link ",placeholder:"Alt Text"})).append(e("<input/>",{id:"imgTarget",class:"form-control form-control-link ",type:"text",placeholder:"Link Target"})).append(e("<input/>",{id:"imgHidden",type:"hidden"}))},getHTMLTable:function(t,a,n){for(var i=e("<table/>",{class:"table"}),l=0;l<n.length;l++)""!=n[l].value&&("width"==n[l].attribute||"height"==n[l].attribute?i.css(n[l].attribute,n[l].value):i.attr(n[l].attribute,n[l].value));for(l=1;l<=t;l++){for(var o=e("<tr/>"),r=1;r<=a;r++)e("<td/>").html("&nbsp;").appendTo(o);o.appendTo(i)}return i},init:function(a){var n={"Sans serif":"arial,helvetica,sans-serif",Serif:"times new roman,serif",Wide:"arial black,sans-serif",Narrow:"arial narrow,sans-serif","Comic Sans MS":"comic sans ms,sans-serif","Courier New":"courier new,monospace",Garamond:"garamond,serif",Georgia:"georgia,serif",Tahoma:"tahoma,sans-serif","Trebuchet MS":"trebuchet ms,sans-serif",Verdana:"verdana,sans-serif"},i={"Heading 1":"<h1>","Heading 2":"<h2>","Heading 3":"<h3>","Heading 4":"<h4>","Heading 5":"<h5>","Heading 6":"<h6>",Paragraph:"<p>"},l={Small:"2",Normal:"3",Medium:"4",Large:"5",Huge:"6"},o=[{name:"Black",hex:"#000000"},{name:"MediumBlack",hex:"#444444"},{name:"LightBlack",hex:"#666666"},{name:"DimBlack",hex:"#999999"},{name:"Gray",hex:"#CCCCCC"},{name:"DimGray",hex:"#EEEEEE"},{name:"LightGray",hex:"#F3F3F3"},{name:"White",hex:"#FFFFFF"},{name:"libreak",hex:null},{name:"Red",hex:"#FF0000"},{name:"Orange",hex:"#FF9900"},{name:"Yellow",hex:"#FFFF00"},{name:"Lime",hex:"#00FF00"},{name:"Cyan",hex:"#00FFFF"},{name:"Blue",hex:"#0000FF"},{name:"BlueViolet",hex:"#8A2BE2"},{name:"Magenta",hex:"#FF00FF"},{name:"libreak",hex:null},{name:"LightPink",hex:"#FFB6C1"},{name:"Bisque",hex:"#FCE5CD"},{name:"BlanchedAlmond",hex:"#FFF2CC"},{name:"LightLime",hex:"#D9EAD3"},{name:"LightCyan",hex:"#D0E0E3"},{name:"AliceBlue",hex:"#CFE2F3"},{name:"Lavender",hex:"#D9D2E9"},{name:"Thistle",hex:"#EAD1DC"},{name:"LightCoral",hex:"#EA9999"},{name:"Wheat",hex:"#F9CB9C"},{name:"NavajoWhite",hex:"#FFE599"},{name:"DarkSeaGreen",hex:"#B6D7A8"},{name:"LightBlue",hex:"#A2C4C9"},{name:"SkyBlue",hex:"#9FC5E8"},{name:"LightPurple",hex:"#B4A7D6"},{name:"PaleVioletRed",hex:"#D5A6BD"},{name:"IndianRed",hex:"#E06666"},{name:"LightSandyBrown",hex:"#F6B26B"},{name:"Khaki",hex:"#FFD966"},{name:"YellowGreen",hex:"#93C47D"},{name:"CadetBlue",hex:"#76A5AF"},{name:"DeepSkyBlue",hex:"#6FA8DC"},{name:"MediumPurple",hex:"#8E7CC3"},{name:"MediumVioletRed",hex:"#C27BA0"},{name:"Crimson",hex:"#CC0000"},{name:"SandyBrown",hex:"#E69138"},{name:"Gold",hex:"#F1C232"},{name:"MediumSeaGreen",hex:"#6AA84F"},{name:"Teal",hex:"#45818E"},{name:"SteelBlue",hex:"#3D85C6"},{name:"SlateBlue",hex:"#674EA7"},{name:"VioletRed",hex:"#A64D79"},{name:"Brown",hex:"#990000"},{name:"Chocolate",hex:"#B45F06"},{name:"GoldenRod",hex:"#BF9000"},{name:"Green",hex:"#38761D"},{name:"SlateGray",hex:"#134F5C"},{name:"RoyalBlue",hex:"#0B5394"},{name:"Indigo",hex:"#351C75"},{name:"Maroon",hex:"#741B47"},{name:"DarkRed",hex:"#660000"},{name:"SaddleBrown",hex:"#783F04"},{name:"DarkGoldenRod",hex:"#7F6000"},{name:"DarkGreen",hex:"#274E13"},{name:"DarkSlateGray",hex:"#0C343D"},{name:"Navy",hex:"#073763"},{name:"MidnightBlue",hex:"#20124D"},{name:"DarkMaroon",hex:"#4C1130"}],r={texteffects:!0,color:{text:"A",icon:"fa fa-font",tooltip:"Text/Background Color",commandname:null,className:null,custom:function(a){var n=e(this),i=0,l=e("<div/>",{id:"paletteCntr",class:"activeColour",css:{display:"none",width:"335px"}}).click(function(e){e.stopPropagation()}),r=e("<div/>",{id:"colorpellete"}),s=e("<ul />",{id:"color_ui"}).append(e("<li />").css({width:"145px",display:"Block",height:"25px"}).html("<div>Text Color</div>")),d=e("<div/>",{id:"bg_colorpellete"}),c=e("<ul />",{id:"bgcolor_ui"}).append(e("<li />").css({width:"145px",display:"Block",height:"25px"}).html("<div>Background Color</div>"));if(n.data("colorBtn")?(i=1,n.data("colorBtn",null)):n.data("colorBtn",1),0==i){for(var p=0;p<o.length;p++)null!=o[p].hex?(s.append(e("<li />").css("background-color",o[p].hex).mousedown(function(e){e.preventDefault()}).click(function(){var a=t.rgbToHex.apply(this,[e(this).css("background-color")]);t.restoreSelection.apply(this),t.setStyleWithCSS.apply(this),document.execCommand("forecolor",!1,a),e("#paletteCntr").remove(),n.data("colorBtn",null)})),c.append(e("<li />").css("background-color",o[p].hex).mousedown(function(e){e.preventDefault()}).click(function(){var a=t.rgbToHex.apply(this,[e(this).css("background-color")]);t.restoreSelection.apply(this),t.setStyleWithCSS.apply(this),document.execCommand("backColor",!1,a),e("#paletteCntr").remove(),n.data("colorBtn",null)}))):(s.append(e("<li />").css({width:"145px",display:"Block",height:"5px"})),c.append(e("<li />").css({width:"145px",display:"Block",height:"5px"})));s.appendTo(r),c.appendTo(d),r.appendTo(l),d.appendTo(l),l.insertAfter(a),e("#paletteCntr").slideDown("slow")}else e("#paletteCntr").remove()}},bold:{text:"B",icon:"fa fa-bold",tooltip:"Bold",commandname:"bold",className:"text-bold",custom:null},italics:{text:"I",icon:"fa fa-italic",tooltip:"Italics",commandname:"italic",className:"text-italic",custom:null},underline:{text:"U",icon:"fa fa-underline",tooltip:"Underline",commandname:"underline",className:"text-underline",custom:null},strikeout:{text:"Strikeout",icon:"fa fa-strikethrough",tooltip:"Strike Through",commandname:"strikeThrough",className:"text-strikeThrough",custom:null},params:{obj:null}},s={texteffects:["bold","italics","underline","color"]},d=e.extend({texteffects:!0,aligneffects:!0,textformats:!0,fonteffects:!0,actions:!0,insertoptions:!0,extraeffects:!0,advancedoptions:!0,screeneffects:!0,bold:!0,italics:!0,underline:!0,ol:!0,ul:!0,insert_link:!0,unlink:!0,insert_img:!0,hr_line:!0,block_quote:!0,source:!0,strikeout:!0,indent:!0,outdent:!0,fonts:n,styles:i,print:!0,rm_format:!0,status_bar:!1,font_size:l,color:o,insert_table:!0,select_all:!0,togglescreen:!0},a),c=e("<div/>",{class:"row-fluid Editor-container"});e(this).hide().after(c);var p=e("<div/>",{id:"menuBarDiv",class:"row-fluid"}).prependTo(c),m=e("<div/>",{class:"Editor-editor",css:{overflow:"auto"},contenteditable:"true"}).appendTo(c);e(this).data("menuBar",p),e(this).data("editor",m);var u=this;for(var h in r)if(d[h])if(h in s){for(var g=e("<div/>",{class:"btn-group"}),f=0;f<s[h].length;f++){var v=s[h][f];if(d[v]){b=t.createMenuItem.apply(this,[r[v],d[v],!0]);g.append(b)}d[v]=!1}p.append(g)}else{var b=t.createMenuItem.apply(this,[r[h],d[h],!0]);p.append(b)}else if(d[h]in s)for(var x in s[h])d[x]=!1;e(document.body).mousedown(function(t){var a=e(t.target);a.parents().andSelf().is("#context-menu")||e("#context-menu").remove(),a.parents().andSelf().is("#specialchar")||'<i class="fa fa-asterisk"></i>'==a.closest("a").html()||e("#specialchar").is(":visible")&&(e(u).data("editor").data("splcharsBtn",null),e("#specialchar").remove()),a.parents().andSelf().is("#paletteCntr")||'<i class="fa fa-font"></i>'==a.closest("a").html()||e("#paletteCntr").is(":visible")&&(e(u).data("editor").data("colorBtn",null),e("#paletteCntr").remove())}),m.bind("contextmenu",function(a){e("#context-menu").length&&e("#context-menu").remove();var n=e("<div/>",{id:"context-menu"}).css({position:"absolute",top:a.pageY,left:a.pageX,"z-index":9999}).click(function(e){e.stopPropagation()}),i=e("<ul/>",{class:"dropdown-menu on",role:"menu"});a.preventDefault(),e(a.target).is("a")?(t.createLinkContext.apply(this,[a,i]),i.appendTo(n),n.appendTo("body")):e(a.target).is("td")||e(a.target).is("th")?(t.createTableContext.apply(this,[a,i]),i.appendTo(n),n.appendTo("body")):e(a.target).is("img")&&(t.createImageContext.apply(this,[a,i]),i.appendTo(n),n.appendTo("body"))})},createLinkContext:function(t,a){e("<li/>").append(e("<a/>",{id:"rem_link",href:"javascript:void(0)",text:"RemoveLink"}).click(function(t){return function(){e(t.target).contents().unwrap(),e("#context-menu").remove()}}(t))).appendTo(a)},createImageContext:function(a,n){var i=t.imageAttributeWidget.apply(this,["edit"]);t.createModal.apply(this,["imgAttribute","Image Attributes",i,function(){var a=/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/,n=e("#imgAlt").val(),i=e("#imgTarget").val();if(""==n)return t.showMessage.apply(this,["imageErrMsg","Please enter image alternative text"]),!1;if(""!=i&&!i.match(a))return t.showMessage.apply(this,["imageErrMsg","Please enter valid url"]),!1;if(""!=e("#imgHidden").val()){var l=e("#imgHidden").val();e("#"+l).attr("alt",n),""!=i?e("#wrap_"+l).length?e("#wrap_"+l).attr("href",i):e("#"+l).wrap(e("<a/>",{id:"wrap_"+l,href:i,target:"_blank"})):e("#wrap_"+l).length&&e("#"+l).unwrap()}e("#imgAttribute").modal("hide"),e(this).data("editor").focus()}]);var l=e("<a/>",{href:"#imgAttribute",text:"Image Attributes","data-toggle":"modal"}).click(function(t){return function(){e("#context-menu").remove();var a=(new Date).getTime();if(e("#imgAlt").val(e(t.target).closest("img").attr("alt")),e("#imgTarget").val(""),void 0!==e(t.target).closest("img").attr("id")){var n=e(t.target).closest("img").attr("id");e("#imgHidden").val(n),e("#wrap_"+n).length?e("#imgTarget").val(e("#wrap_"+n).attr("href")):e("#imgTarget").val("")}else e(t.target).closest("img").attr("id","img_"+a),e("#imgHidden").val("img_"+a)}}(a));n.append(e("<li/>").append(l)).append(e("<li/>").append(e("<a/>",{text:"Remove Image"}).click(function(t){return function(){e("#context-menu").remove(),e(t.target).closest("img").remove()}}(a))))},createTableContext:function(a,n){e("#editProperties").remove();var i=t.tableWidget.apply(this,["edit"]);t.createModal.apply(this,["editProperties","Table Properties",i,function(){var n=e("#tblWidthEdt").val(),i=e("#tblHeightEdt").val(),l=e("#tblBorderEdt").val(),o=e("#tblAlignEdt").val(),r=e("#tblCellspacingEdt").val(),s=e("#tblCellpaddingEdt").val(),d=/^auto$|^[+-]?[0-9]+\.?([0-9]+)?(px|em|ex|%|in|cm|mm|pt|pc)?$/gi,c=/^[0-9]+\.?([0-9])?$/;return(""==n||n.match(d))&&(""==i||i.match(d))?""==l||l.match(c)?""==r||r.match(c)?""==s||s.match(c)?(e(a.target).closest("table").css("width",n),""!=i&&e(a.target).closest("table").css("height",i),e(a.target).closest("table").attr("align",o),e(a.target).closest("table").attr("border",l),e(a.target).closest("table").attr("cellspacing",r),e(a.target).closest("table").attr("cellpadding",s),e("#editProperties").modal("hide"),void e(this).data("editor").focus()):(t.showMessage.apply(this,["tblErrMsgEdt","Cell padding must be a positive number"]),!1):(t.showMessage.apply(this,["tblErrMsgEdt","Cell spacing must be a positive number"]),!1):(t.showMessage.apply(this,["tblErrMsgEdt","Border size must be a positive number"]),!1):(t.showMessage.apply(this,["tblErrMsgEdt","Please enter positive number with or without a valid CSS measurement unit (px,em,ex,%,in,cm,mm,pt,pc)"]),!1)}]);var l=e("<a/>",{href:"#editProperties",text:"Table Properties","data-toggle":"modal"}).click(function(t){return function(){e("#context-menu").remove(),e("#tblRowsEdt").val(e(t.target).closest("table").prop("rows").length),e("#tblColumnsEdt").val(e(t.target).closest("table").find("tr")[0].cells.length),e("#tblRowsEdt").attr("disabled","disabled"),e("#tblColumnsEdt").attr("disabled","disabled"),e("#tblWidthEdt").val(e(t.target).closest("table").get(0).style.width),e("#tblHeightEdt").val(e(t.target).closest("table").get(0).style.height),e("#tblAlignEdt").val(e(t.target).closest("table").attr("align")),e("#tblBorderEdt").val(e(t.target).closest("table").attr("border")),e("#tblCellspacingEdt").val(e(t.target).closest("table").attr("cellspacing")),e("#tblCellpaddingEdt").val(e(t.target).closest("table").attr("cellpadding"))}}(a));n.append(e("<li/>",{class:"dropdown-submenu",css:{display:"block"}}).append(e("<a/>",{tabindex:"-1",href:"javascript:void(0)",text:"Row"})).append(e("<ul/>",{class:"dropdown-menu"}).append(e("<li/>").append(e("<a/>",{id:"tbl_addrow",href:"javascript:void(0)",text:"Add Row"}).click(function(t){return function(){e("#context-menu").remove();var a=e(t.target).closest("tr"),n=e("<tr/>");a.children().each(function(){var t=e("<"+e(this).prop("nodeName")+"/>").html("&nbsp;");n.append(t)}),a.after(n)}}(a)))).append(e("<li/>").append(e("<a/>",{text:"Remove Row"}).click(function(t){return function(){e("#context-menu").remove(),e(t.target).closest("tr").remove()}}(a)))))).append(e("<li/>",{class:"dropdown-submenu",css:{display:"block"}}).append(e("<a/>",{tabindex:"-1",href:"javascript:void(0)",text:"Column"})).append(e("<ul/>",{class:"dropdown-menu"}).append(e("<li/>").append(e("<a/>",{id:"tbl_addcolumn",href:"javascript:void(0)",text:"Add Column"}).click(function(t){return function(){e("#context-menu").remove();var a=e(t.target),n=a.siblings().addBack().index(a);a.closest("table").find("tr").each(function(){var t=e(this).children(":eq("+n+")"),a=e("<"+t.prop("nodeName")+"/>").html("&nbsp;");t.after(a)})}}(a)))).append(e("<li/>").append(e("<a/>",{text:"Remove Column"}).click(function(t){return function(){e("#context-menu").remove();var a=e(t.target),n=a.siblings().addBack().index(a);a.closest("table").find("tr").each(function(){e(this).children(":eq("+n+")").remove()})}}(a)))))),n.append(e("<li/>").append(l)).append(e("<li/>",{class:"divider"})).append(e("<li/>").append(e("<a/>",{text:"Remove Table"}).click(function(t){return function(){e("#context-menu").remove(),e(t.target).closest("table").remove()}}(a))))},createModal:function(t,a,n,i){var l=e("<a/>",{href:"#"+t,role:"button",class:"btn btn-default","data-toggle":"modal"});return e("<div/>",{id:t,class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"h3_"+t,"aria-hidden":"true"}).append(e("<div>",{class:"modal-dialog"}).append(e("<div>",{class:"modal-content"}).append(e("<div>",{class:"modal-header"}).append(e("<button/>",{type:"button",class:"close","data-dismiss":"modal","aria-hidden":"true"}).html("x")).append(e("<h3/>",{id:"h3_"+t}).html(a))).append(e("<div>",{class:"modal-body"}).append(n)).append(e("<div>",{class:"modal-footer"}).append(e("<button/>",{type:"button",class:"btn btn-default","data-dismiss":"modal","aria-hidden":"true"}).html("Cancel")).append(e("<button/>",{type:"button",class:"btn btn-success"}).html("Done").mousedown(function(e){e.preventDefault()}).click(function(e){return function(){i.apply(e)}}(this)))))).appendTo("body"),l},createMenuItem:function(a,n,i){if(a.select){var l=e("<div/>",{class:"btn-group"}),o=e("<ul/>",{class:"dropdown-menu"});l.append(e("<a/>",{class:"btn btn-default dropdown-toggle ","data-toggle":"dropdown",href:"javascript:void(0)",title:a.tooltip}).html(a.default).append(e("<span/>",{class:"caret"})).mousedown(function(e){e.preventDefault()})),e.each(n,function(t,a){var n=e("<li/>");e("<a/>",{tabindex:"-1",href:"javascript:void(0)"}).html(t).appendTo(n),n.click(function(){e(this).parent().parent().data("value",a),e(this).parent().parent().trigger("change")}),o.append(n)});r="change"}else{if(a.modal){var l=t.createModal.apply(this,[a.modalId,a.modalHeader,a.modalBody,a.onSave]),o=e("<i/>");return a.icon?o.addClass(a.icon):o.html(a.text),l.append(o),l.mousedown(function(e,t,a){return function(n){n.preventDefault(),t.saveSelection.apply(e),a&&a.apply(e)}}(this,t,a.beforeLoad)),l.attr("title",a.tooltip),l}var l=e("<a/>",{href:"javascript:void(0)",class:"btn btn-default "+a.className}),o=e("<i/>");a.icon?o.addClass(a.icon):o.html(a.text);var r="click"}if(a.custom?l.bind(r,function(n,i){return function(){t.saveSelection.apply(n),a.custom.apply(n,[e(this),i])}}(this,a.params)):(l.data("commandName",a.commandname),l.data("editor",e(this).data("editor")),l.bind(r,function(){t.setTextFormat.apply(this),e(this).toggleClass(" click")})),l.attr("title",a.tooltip),l.css("cursor","pointer"),l.append(o),i)return l;e(this).data("menuBar").append(l)},setTextFormat:function(){return t.setStyleWithCSS.apply(this),document.execCommand(e(this).data("commandName"),!1,e(this).data("value")||null),e(this).data("editor").focus(),!1},getSource:function(t,a){var n=0;t.data("state")?(n=1,t.data("state",null)):t.data("state",1),e(this).data("source-mode",!n);var i,l=e(this).data("editor");if(0==n)i=document.createTextNode(l.html()),l.empty(),l.attr("contenteditable",!1),preElement=e("<pre/>",{contenteditable:!0}),preElement.append(i),l.append(preElement),t.parent().siblings().hide(),t.siblings().hide();else{var o=l.children().first().text();l.html(o),l.attr("contenteditable",!0),t.parent().siblings().show(),t.siblings().show()}},countWords:function(a){for(var n=0,i=a.contents().filter(function(){return 3==this.nodeType}),l=0;l<i.length;l++)text=i[l].textContent,text=text.replace(/[^-\w\s]/gi," "),text=e.trim(text),n+=text.split(/\s+/).length;a.children().each(function(){n+=t.countWords.apply(this,[e(this)])});return n},countChars:function(a){for(var n=0,i=a.contents().filter(function(){return 3==this.nodeType}),l=0;l<i.length;l++)text=i[l].textContent,n+=text.length;a.children().each(function(){n+=t.countChars.apply(this,[e(this)])});return n},getWordCount:function(){return t.countWords.apply(this,[e(this).data("editor")])},getCharCount:function(){return t.countChars.apply(this,[e(this).data("editor")])},rgbToHex:function(e){return e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2)},showMessage:function(t,a){e("<div/>",{class:"alert alert-danger"}).append(e("<button/>",{type:"button",class:"close","data-dismiss":"alert",html:"x"})).append(e("<span/>").html(a)).appendTo(e("#"+t)),setTimeout(function(){e(".alert").alert("close")},3e3)},getText:function(){return e(this).data("source-mode")?e(this).data("editor").children().first().text():e(this).data("editor").html()},setText:function(t){e(this).data("source-mode")?e(this).data("editor").children().first().text(t):e(this).data("editor").html(t)},setStyleWithCSS:function(){if(navigator.userAgent.match(/MSIE/i))try{Editor.execCommand("styleWithCSS",0,!1)}catch(e){try{Editor.execCommand("useCSS",0,!0)}catch(e){try{Editor.execCommand("styleWithCSS",!1,!1)}catch(e){}}}else document.execCommand("styleWithCSS",null,!0)}};e.fn.Editor=function(a){return t[a]?t[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void e.error("Method "+a+" does not exist on jQuery.Editor"):t.init.apply(this,arguments)}}(jQuery);